(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],f=0,d=[];f<s.length;f++)i=s[f],a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("7f7f"),n("96cf");var r=n("3b8d"),a=(n("0fb7"),n("450d"),n("f529")),o=n.n(a),i=(n("e960"),n("b35b")),s=n.n(i),c=(n("06f1"),n("6ac9")),u=n.n(c),l=(n("eca7"),n("3787")),f=n.n(l),d=(n("10cb"),n("f3ad")),p=n.n(d),h=(n("6611"),n("e772")),m=n.n(h),b=(n("1f1a"),n("4e4b")),g=n.n(b),v=(n("425f"),n("4105")),w=n.n(v),k=(n("a7cc"),n("df33")),x=n.n(k),y=(n("cbb5"),n("8bbc")),_=n.n(y),R=(n("b8e0"),n("a4c4")),F=n.n(R),S=(n("5466"),n("ecdf")),j=n.n(S),P=(n("38a0"),n("ad41")),$=n.n(P),O=(n("1951"),n("eedf")),L=n.n(O),D=(n("14c6"),n("08c1"),n("4842"),n("d9fc"),n("2b0e")),B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},z=[],T={name:"App",data:function(){return{}}},C=T,V=(n("7c55"),n("2877")),E=Object(V["a"])(C,B,z,!1,null,null,null),I=E.exports,M=n("8c4f"),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left"}},[e._v("抢单用户")]),n("div",[n("el-switch",{attrs:{"active-text":"大额订单"},on:{change:e.changeBig},model:{value:e.lockBig,callback:function(t){e.lockBig=t},expression:"lockBig"}}),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加用户")])],1)]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""}},[n("el-table-column",{attrs:{property:"name",label:"用户名",width:"150"}}),n("el-table-column",{attrs:{property:"token",label:"令牌",width:"450"}}),n("el-table-column",{attrs:{property:"total",label:"成功刷新",width:"100"}}),n("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:0==t.row.isRun?"danger":"success"}},[e._v(e._s(0==t.row.isRun?"已关闭":"已启动"))])]}}])}),n("el-table-column",{attrs:{property:"updated_at",width:"150",label:"时间"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isRun?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.onStart(t.row.id,t.row.token)}}},[e._v("启动")]):e._e(),0!=t.row.isRun?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){return e.onStop(t.row.id,t.row.token)}}},[e._v("关闭")]):e._e(),0==t.row.isRun?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return e.onEdit(t.row)}}},[e._v("修改")]):e._e(),0==t.row.isRun?n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible2[t.$index],callback:function(n){e.$set(e.visible2,t.$index,n)},expression:"visible2[scope.$index]"}},[n("p",{staticStyle:{"padding-bottom":"10px"}},[e._v("确认删除该用户吗？")]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.close(t.$index)}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.onDelete(t.row.id)}}},[e._v("确定")])],1),0==t.row.isRun?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")]):e._e()],1):e._e()]}}])})],1)],1),n("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{float:"left"}},[e._v("抢单明细")])]),n("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":e.showHeader,data:e.tableData1,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{prop:"date",label:"日期",width:"250"}}),n("el-table-column",{attrs:{prop:"name",label:"用户",width:"250"}}),n("el-table-column",{attrs:{prop:"isRun",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1==t.row.isRun?n("span",[e._v("锁单成功")]):e._e(),1==t.row.isRun?n("span",[e._v("锁单失败")]):e._e(),-3==t.row.isRun?n("span",[e._v("已经有锁单了")]):e._e()]}}])})],1)],1),n("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,center:e.center},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.ruleForm}},[n("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),n("el-form-item",{attrs:{label:"令牌","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.token,callback:function(t){e.$set(e.ruleForm,"token",t)},expression:"ruleForm.token"}})],1)],1),n("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"-30px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},U=[],W=(n("4917"),n("3b2b"),n("bc3a")),q=n.n(W),A=function(e){if(e)return window.localStorage.getItem(e)};q.a.defaults.baseURL="/api",q.a.defaults.timeout=5e3,q.a.defaults.headers.post["Content-Type"]="application/x-www=form-urlencoded",q.a.interceptors.response.use(function(e){return e},function(e){return console.log(e),e.response.status<500&&(401==e.response.status||422==e.response.status?D["default"].prototype.$message.error(e.response.data.message||e.response.data.msg):403==e.response.status&&ie.push({path:"/exception/403"})),Promise.reject(e)});var H=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return t=document.cookie.match(n),t?t[2]:null},J={fetchGet:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.a.defaults.headers["x-csrf-token"]=H("csrfToken"),q.a.defaults.headers["x-token"]=A("token"),new Promise(function(n,r){q.a.get(e,{params:t}).then(function(e){n(e.data)}).catch(function(e){0})})},fetchPost:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.a.defaults.headers["x-csrf-token"]=H("csrfToken"),q.a.defaults.headers["x-token"]=A("token"),new Promise(function(n,r){q.a.post(e,t).then(function(e){n(e.data)}).catch(function(e){0})})},fetchPut:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.a.defaults.headers["x-csrf-token"]=H("csrfToken"),q.a.defaults.headers["x-token"]=A("token"),new Promise(function(n,r){q.a.put(e,t).then(function(e){n(e.data)}).catch(function(e){0})})},fetchPatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.a.defaults.headers["x-csrf-token"]=H("csrfToken"),q.a.defaults.headers["x-token"]=A("token"),new Promise(function(n,r){q.a.patch(e,t).then(function(e){n(e.data)}).catch(function(e){0})})},fetchDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return q.a.defaults.headers["x-csrf-token"]=H("csrfToken"),q.a.defaults.headers["x-token"]=A("token"),new Promise(function(n,r){q.a.delete(e,t).then(function(e){n(e.data)}).catch(function(e){0})})}},N=function(e){return J.fetchGet("/receipts",e)},K=function(e){return J.fetchPost("/receipts",e)},Q=function(e,t){return J.fetchDelete("/receipts/"+e,t)},X=function(e,t){return J.fetchPatch("/receipts/"+e,t)},Y=function(e,t){return J.fetchPatch("/receipts/start/"+e,t)},Z=function(e,t){return J.fetchPatch("/receipts/stop/"+e,t)},ee=function(e){return J.fetchGet("/detail",e)},te=function(e){return J.fetchPatch("/isLockBig",e)},ne={data:function(){return{tableData:[],tableData1:[],currentRow:null,dialogFormVisible:!1,ruleForm:{id:"",name:"",token:""},audioUrl:"http://fjdx.sc.chinaz.net/Files/DownLoad/sound1/201906/11611.wav",visible2:[],rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],token:[{required:!0,message:"请输入令牌",trigger:"blur"}]},lockBig:!1,setInterval:"",showHeader:!1,center:!0,title:"添加用户",formLabelWidth:"80px"}},created:function(){this.init()},methods:{init:function(){var e=this;this.getList(),this.setInterval=setInterval(function(){e.getList()},3e3)},close:function(e){this.visible2.splice(e,1,!1)},changeBig:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te({lockBig:t});case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:this.page,pageSize:this.pageSize},e.next=3,N(t);case 3:if(n=e.sent,0!=n.code){e.next=9;break}clearInterval(this.setInterval),this.$message.error(n.msg),e.next=21;break;case 9:this.tableData=n.rows,this.lockBig=n.lockBig,r=0;case 12:if(!(r<n.rows.length)){e.next=21;break}if(-1!=n.rows[r].isRun&&-2!=n.rows[r].isRun){e.next=18;break}return a=new Audio,a.src=this.audioUrl,a.play(),e.abrupt("break",21);case 18:r++,e.next=12;break;case 21:return e.next=23,ee({});case 23:o=e.sent,this.tableData1=o.reverse();case 25:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}if(""===t.ruleForm.id){e.next=8;break}return e.next=4,X(t.ruleForm.id,t.ruleForm);case 4:r=e.sent,1==r.code?(t.dialogFormVisible=!1,t.getList()):t.$message.error(r.msg),e.next=12;break;case 8:return e.next=10,K(t.ruleForm);case 10:a=e.sent,1==a.code?(t.dialogFormVisible=!1,t.getList()):t.$message.error(a.msg);case 12:e.next=15;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},onEdit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.dialogFormVisible=!0,this.ruleForm=t;case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent,1==n.code?this.getList():this.$message.error(n.msg);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),tableRowClassName:function(e){var t=e.row;return-3==t.isRun?"warning-row":-1===t.isRun?"success-row":1===t.isRun?"error-row":""},onStop:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z(t,{token:n});case 2:r=e.sent,0==r.code?this.$message.error(r.msg):1==r.code&&this.getList();case 4:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),onStart:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y(t,{token:n,isLocked:r});case 2:a=e.sent,0==a.code?this.$message.error(a.msg):1==a.code&&this.getList();case 4:case"end":return e.stop()}},e,this)}));function t(t,n,r){return e.apply(this,arguments)}return t}()}},re=ne,ae=(n("7bc7"),Object(V["a"])(re,G,U,!1,null,null,null)),oe=ae.exports;D["default"].use(M["a"]);var ie=new M["a"]({mode:"history",routes:[{path:"*",name:"抢单软件",component:oe}]}),se=n("2f62");D["default"].use(se["a"]);for(var ce=new se["a"].Store({state:{},mutations:{},actions:{}}),ue=(n("db4d"),[L.a,$.a,j.a,F.a,_.a,x.a,w.a,g.a,m.a,p.a,f.a,u.a,s.a]),le=0;le<ue.length;le++)D["default"].use(ue[le]);D["default"].prototype.$message=o.a,D["default"].config.productionTip=!1,ie.beforeEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.name&&(document.title=t.name),r();case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),new D["default"]({router:ie,store:ce,render:function(e){return e(I)}}).$mount("#app")},"5c48":function(e,t,n){},"7bc7":function(e,t,n){"use strict";var r=n("fd1e"),a=n.n(r);a.a},"7c55":function(e,t,n){"use strict";var r=n("5c48"),a=n.n(r);a.a},fd1e:function(e,t,n){}});